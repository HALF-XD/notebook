## 例子

**exam1.c** : 输入一个字符串，并反向输出。

`fputc` 一次只能单独输出一个字符，`fputs` 一次可以输出一个字符串;

**exam2.c** : 比较词序列，并替换其中的指定词，最后将所有词拼接形成一个新的句子。

## 字符串输入

如果想把一个字符串读取到程序中，必须首先预留存储字符串的空间，然后使用输入函数来获取这个字符串。

C 库提供了**三个读取字符串的函数**： `scanf()` 、`gets()`和 `fgets()`。

### 创建存储空间

可以通过数组( `char name[10]` )来分配存储空间，也可以通过 C 语言动态内存分配函数来动态分配存储空间。

```c
char *name;
scanf("%s", name);
```

如果通过上面的代码来创建存储空间，可能会通过编译器，但是在读入 `name` 的时候，`name` 会覆盖程序中的数据和代码，并可能导致程序异常终止。

这个是因为 `scanf()` 把信息复制到由 `name` 指定的地址中，而在这种情况下，参数是个 未被初始化的指针，`name` 可能指向任何地方。

### `gets()` 函数

`gets()` ( get string ) 函数对于交互式程序非常方便，它从系统的标准输入设备(通常是键盘)获得一个字符串。

因为字符串没有预定的长度，所以 `gets()` 函数通过判断遇到的第一个换行符 ( `\n` ) 结束输入，按回车键可以产生这个字符。

它读取换行符之前( **不包括换行符** )的所有字符，并在这些字符后添加一个 **空字符(`\0`)** 。

**例子：case1.c**
会得到提醒：`warning: this program uses gets(), which is unsafe.`

因为 `gets()` 函数不检查存储区是否能够容纳实际输入的数据，可以用后面的 `fgets()` 函数替换 `gets()`函数

如果在 `gets()` 函数在读取字符串时出错或者遇到文件结尾，它就返回一个空(或 0)地址，这个空地址被称为 **空指针**，并且 `stdio.h` 里面定义的常量 `NULL` 来表示，可以用下面的代码来进行一些错误检测。

```c
while(get(name) != NULL)
```

也可以通过 `getchar` 函数来完成上面的错误检测。

```c
while((ch = getchar()) != EOF)
```

**注意**：空指针和空字符是不一样的，不要混淆。

空指针是一个地址，而空字符是一个 `char` 类型的数据对象其值为 0，数字上都可以用 0 表示，但是概念不同：NULL 是一个指针，而 0 是一个 char 类型的常量。

### `fgets()` 函数

因为 `gets()` 函数不会检查存储区是否能够容纳实际输入的数据，多出来的字符简单地溢出到相邻的内存区，所以 `case1.c` 在编译的时候会有 warning。

- `fgets()` 函数和 `gets()` 函数的不同:
  - 它需要第二个参数来说明最大读入字符数。如果这个参数值为 `n`, `fgets()` 就会读取最多 `n-1` 个字符或者读完一个换行符为止(因为会自动添加一个空字符( `\n` )，由这两者中最先满足的那个结束输入。
  - 如果 `fgets()` 读取到换行符，就会把它存到字符串里，而不是像 `gets()` 那样丢弃。
  - 它还需要第三个参数来说明读哪一个文件，从键盘上读取数据时，可以使用 `stdin` (代表 `standard input` )作为参数，这个标识符在 `stdio.h` 中定义。

**例子：case2.c**
这里就没有 warning 出现
打印结果会有换行符，因为 `fgets()` 函数没有丢弃输入的换行符

### `scanf()` 函数

- `scanf()` 函数可以使用 `%s` 格式来读入一个字符串，
- `scanf()` 函数和 `gets()` 函数的主要区别在于 **如何决定字符串何时结束**。
- `scanf()` 函数更基于获得单词(get word)而不是获取字符串(get string)。
- `scanf()` 函数有两种方法决定输入结束，无论哪一种都是遇到的第一个非空白字符开始
  1. 如果使用 `%s` 格式，字符串读取到(但不包括)下一个空白字符(比如空格、制表符或换行符).
  2. 如果指定了字段宽度，比如 `%10s`， `scanf()` 函数就会读取 10 个字符或者直到遇到第一个空白字符，由二者最先满足的那一个终止输入.

## 字符串输出

C 语言有三个输出字符串的标准库函数：`puts()` 、`fputs()` 和 `printf()`

### `puts()` 函数

**例子：case3.c**

`puts()` 函数使用很简单，只需要给出**字符串参数的地址**，它遇到空字符( `\0` )就会结束输出(所以必须要有空字符)。

`puts()` 函数在显示字符串的时候，会自动在其后添加一个换行符( `\n` )。

### `fputs()` 函数

`fputs()` 函数 `puts()` 函数面向文件版本，两者主要的**区别**是：`fputs()` 函数需要第二个参数来说明要写的文件，可以使用 `stdout` (standard output) 作为参数来进行输出显示。与 `puts()` 函数不同，`fputs()` 函数并不为输出自动添加换行符。

**例子：case4.c**: 读取一行并把它回显在下一行.

### `printf()` 函数

如同 `puts()` 函数一样，`printf()` 函数在输出字符串的时候同样需要一个字符串地址作为参数，但是 `printf()` 函数没有 `puts()` 函数方便，但是它可以格式化多种数据类型，输出的时候也不自动添加换行符。

## 字符串函数

例子在 **case5.c**

### 字符数组的输入和输出

scanf(格式控制，地址表列(在变量前加上取地址符&)) 和 printf(格式控制，输出表列)
gets(字符数组)和 puts(字符数组)

`gets()` 和 `puts()` 函数只能输入和输出一个字符串，不可输出多个;
`scanf()` 和 `printf()` 可输入输出多个。
如: `puts(str1,str2);` 是错误的写法。

### 字符串连接函数

strcat(字符数组 1，字符数组 2)

注意：
1、字符串 2 连接到字符串 1 的后面，将连接后的结果放在字符数组 1 中，最后得到字符数组 1 的地址；
2、两个字符串后面均有结束符’\0’，在连接时字符串 1 后面的结束符会被取消，只在新串最后保留结束符。

### 字符串复制函数

strcpy(字符数组 1，字符数串 2 或者字符数组名)
strncpy(字符数组 1，字符串 2 或者字符数组名，n)

注意：
1、若开始没有对字符数组 1 进行初始化或者复制，str1 中的内容是无法预知的，复制时 str2 将内容和结束符一起复制到 str1 中，而此时 str1 字符数组结束符后面的剩余空间的字节内容不一定是’\0’；

2、不能用赋值语句将字符串常量或者字符数组直接赋值给字符数组，如 str1=“world”;这写法是错误的，必须要用 strcpy()函数，用赋值语句将一个字符赋值给字符型变量或者字符数组是可以的。

### 字符串比较函数

strcmp(字符串 1 或者字符数组，字符数串 2 或者字符数组)

注意：
1、两个字符串从左到右按照 ACSII 码值大小比较，直到出现不同的字符或者遇到’\0’为止；

2、若出现不相同的字符，则以第一对不相同的字符的比较结果为准；

3、字符串 1 等于字符串 2，函数值为 0，字符串 1 大于字符串 2，函数值为正整数，字符串 1 小于字符串 2，函数值为负整数；

4、两个字符串不能直接用 str1>str2 这种方式比较，必须用 strcmp()函数。

### 字符串长度函数：

strlen(字符串或者字符数组)

注意：
1、strlen()函数在测试字符串长度时不包括结束符；

2、为了测试字符串的实际长度，C 语言规定了一个字符串结束标志，以字符’\0’作为结束标志，因此上述程序中虽然字符数组大小为 15，但是程序运行结果为 5，因为碰到’\0’自动结束。

### 字符串转换大小写函数：

大写转小写：strlwr(字符数组)
小写转大写：strupr(字符数组)
