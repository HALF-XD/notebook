## 结构体基础知识

### 1. 建立自己的数据类型

1.  定义结构体类型变量

    1.1. 先声明结构体，再定义该类型的变量(常用)

    ```c
    struct Student{
        int num;
    };
    Struct Student      stu1, stu2;
    // 结构体类型名       结构体变量名
    ```

    1.2. 声明+定义

    ```c
    struct Student {
        int num;
    } stu1, stu2;
    ```

    1.3. 不指定类型名, 直接定义结构体类型变量

    ```c
    struct {
        int num;
    } stu1, stu2;

    ```

2.  结构体变量的初始化和引用
    **例子 case1.c** : 把一个学生的信息（包括学号、姓名、性别、住址）放在一个结构体变量中，然后输出这个学生的信息
    **例子 case2.c** : 输入两个学生的学号、姓名，成绩，输出成绩较高的学生的学号、姓名，成绩

3.  对某一成员初始化

    ```c
    struct Student  b={.name="zhang Fang"};   //在成员名前有成员运算符"."
    ```

    `.name` 隐含代表结构体变量 b 中的成员 `b.name`。 其他未被指定初始化的数值型成员被系统初始化为 0，字符型成员被系统初始化为 `\0`,指针型成员被系统初始化为 `NULL`

4.  引用结构体变量中成员的值

    结构体变量.成员名

    ```c
    student1.num=10010;
    ```

### 2. 结构体数组

定义结构体数组

**例子 case3.c** : 有三个候选人，每个选民只能投票选一人，要求编一个统计选票的程序，先输入被选人的名字，最后输出各人得票结果

结构体数组应用举例

**例子 case4.c** : 有 n 个学生的信息(包括学号、姓名、成绩)，要求按照成绩的高低顺序输出各学生的信息

### 3. 结构体指针

1. 指向结构体变量的指针

   指向结构体对象的指针变量既可以指向结构体变量，也可以指向结构体数组中的元素。指针变量的基类型必须与结构体变量的类型相同。

   ```c
   struct Student *pt; // pt 可以指向 struct Student 类型的变量或数组元素
   ```

   **例子 case5.c** : 通过指向结构体变量的指针变量输出结构体变量中成员的信息

   **重点**: `->` 称为指向运算符。

   ```c
   struct Student stu;     // 定义struct Student类型的变量stu
   struct Student *p;
   p = &stu;               // 如果 p 指向一个结构体变量 stu
   ```

   `p–>num` 表示 p 所指的结构体变量中的 num 成员。

   上面 👆🏻，`stu.num` == `(*p).num` == `p–>num`.

2. 指向结构体数组的指针
   **例子 case6.c** : 有 3 个学生的信息，放在结构体数组中，要求输出全部学生的信息

3. 用结构体变量和结构体变量的指针**作函数参数**
   **例子 case7.c** : 有 n 个结构体变量，内含学生学号，姓名和 3 门课程的成绩。要求输出平均成绩最高的学生信息(包括学号、姓名、3 门课程成绩和平均成绩)

### 4. 用指针处理链表

1. 链表

   动态地进行存储和分配的一种结构。如果难以确定数据的量，必须把数组定义的足够大，以便能存放数据，这会造成浪费内存，而链表则没有这种缺点。

2. 建立简单的静态链表

   **例子 case8.c** : 建立简单链表，它由 3 个学生数据的结点组成，要求输出各结点中的数据。

3. 动态链表

   **例子 case9.c**: 写一个函数建立一个有 3 名学生数据的单向动态链表。

4. 输出链表

   **例子 case10.c**: 编写一个输出链表的函数 print。

### 5. 共用体类型

1. 是什么？

   用同一段内存单元存放不同类型的变量。而这种使几个不同的变量共享同一段内存的结构，称为 “共用体” 类型的结构。

2. 形式

   ```c
   union Data{
       int i;
       char ch;
       float f;
   } a, b, c;
   ```

3. 引用： a.f;

4. 数据特点；

   (1) 共用体与结构体非常相似，结构体变量所占内存长度等于各个成员占内存长度的和，每个成员分别占有自己的内存，而共用体变量所占内存长度等关于最长的成员的长度。

   (2) 同一段内存可以存放几种不同类型的成员，但每一瞬间只能存放其中一个成员。

   (3) 可以对共用体变量初始化，但初始化表中只能有一个常量，union Data a = {16}。

   (4) 共用体变量中起作用的成员是最后一次被赋值的变量。

   (5) 共用体变量的地址和它的各个成员的地址都是同一地址。

   (6) 不能对共用体变量名赋值，也不能企图引用变量名来得到一个值，如 a = 1 不对。

   (7) 可以使用共用体变量的指针做函数参数。

   **例子 case11.c** : 为不同角色的人存储数据。

### 6. 枚举类型

1. 是什么？enumeration

   ```c
    // 声明了一个枚举类型 enum Weekday。
    enum Weekday{sun, mon, tue, wed, thu, fri, sat};
    // 可以用此类型来定义变量
    enum Weekday workday, weekend;
    workday = mon;  // 正确
    weekend = sun;  // 正确
    weekday = monday;  // 错误
   ```

   说明：
   (1) 不能将他们看成变量对他们赋值， 例如：

   ```c
   sun = 0; mon = 1; // 错误
   ```

   (2) 每一个枚举元素都代表一个整数，C 语言编译按定义时的顺序默认它们的值为 0,1,2,3…。如果有赋值语句： `workday = mon;` 相当于 `workday = 1;` 也可以人为地指定枚举元素的数值，在定义枚举类型时显示地指定，
   例如：

   ```c
   enum Weekday{sun=7,mon=1,tue,wed,thu,fri,sat} workday,week_end;
   ```

   指定枚举常量 `sun` 的值为 7，`mon` 为 1，以后顺序加 1，`sat` 为 6。

   **例子 case12.c**

### 7. typedef

1.  用一个新类型名代替原有的类型名
    好处：提高可移植性

    ```c
     typedef int Integer;   //指定用 Integer 作为类型名，所用与int相同
     typedef float Real;    //指定用 Real 作为类型名，所用与float相同
    ```

2.  命名一个简单的类型名代替复杂的类型表示方法

    C 程序中除了简单类型名（int、char 等），还有许多看起来复杂的类型名（结构体类型、共用体类型、指针类型等），C 允许程序设计者用一个简单的名字代替复杂的名字。

    (1) 命名一个新的类型名代表**结构体**类型

    ```c
    typedef struct {
        int month;
        int day;
    }Date;

    Date today;     // 定义结构体类型变量
    Date *p;        // 定义结构体指针变量 p,指向此结构体类型数据
    ```

    (2) 命名一个新的类型名代表**数组**类型

    ```c
    typedef int Num[100];	// 声明 Num为整形数组类型名
    Num a;			// 定义a为整形数组名，它有100个元素
    ```

    (3) 命名一个新的类型名代表**指针**类型

    ```c
    typedef char* String;	// 声明String为字符指针类型
    String p,s[10];		    // 定义p为字符指针变量,s为字符指针数组
    ```

    (4) 命名一个新的类型名代表**指向函数的指针**类型

    ```c
    // 声明Pointer为指向函数的指针类型，函数返回整型值
    typedef int (* Pointer)();
    Pointer p;			// p为Pointer类型的指针变量
    ```

    归纳起来，声明一个新的类型名的方法是：
    ① 先按定义变量的方法写出定义体（如 `int i;` ）。
    ② 将变量名换成新类型名（例如：将 i 换成 `Count`）。
    ③ 在最前面加 `typedef`（例如：`typedef int Count` ）。
    ④ 然后可以用新类型名去定义变量

    简单地说，就是 **按定义变量的方式，把变量名换上新类型名，并且在最前面加“typedef”，就声明了新类型名代表原来的类型**。

    习惯上，常把用 `typedef` 声明的类型名的第一个字母用大写表示，以便于系统提供的标准类型标识符相区别。

当不同源文件中用到同一类型的数据(尤其是像数组、指针、结构体、共用体等类型数据)时，常用 typedef 声明一些数据类型。可以把所有的 typedef 名称声明单独放在一个头文件中，然后在需要用到他们的文件中用 `#include` 指令把它们包含到文件中。这样编程者就不需要在各文件中自己定义 typedef 名称了
